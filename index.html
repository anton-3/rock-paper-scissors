<script>
    function computerPlay() {
        // randomly returns either rock, paper, or scissors
        let move = Math.floor(Math.random() * 3);
        if (move < 1) {
            return 'Rock';
        } else if (move < 2) {
            return 'Paper';
        } else {
            return 'Scissors';
        }
    }

    function capitalize(str) {
        // returns string with first letter capitalized and rest lowercase
        return str.substring(0, 1).toUpperCase() + str.substring(1).toLowerCase();
    }

    function playRound(playerSelection, computerSelection) {
        playerSelection = capitalize(playerSelection);

        if (playerSelection === computerSelection) {
            let result = 'Tie!'
            return result;
        } else if (    // checking all win conditions
        (playerSelection === 'Rock' && computerSelection === 'Scissors') ||
        (playerSelection === 'Scissors' && computerSelection === 'Paper') ||
        (playerSelection === 'Paper' && computerSelection === 'Rock')
        ) {
            let result = 'You Win!'
            return `${result} ${playerSelection} beats ${computerSelection}!`
        } else {    // only lose conditions left
            let result = 'You Lose!'
            return `${result} ${computerSelection} beats ${playerSelection}!`
        }
    }
    
    function game() {
        let playerWinCount = 0;
        let playerLoseCount = 0;

        for (let i = 1; i < 6; i++) {   // 5 games
            let playerSelection = prompt(`Game ${i} of 5: Enter Rock, Paper, or Scissors.`);
            let computerSelection = computerPlay();
            console.log(playRound(playerSelection, computerSelection));
            if (playRound(playerSelection, computerSelection).includes('Win')) {    // if player wins this round, increment player score
                playerWinCount++;
            } else if (playRound(playerSelection, computerSelection).includes('Lose')) {    // if player loses this round, decrement player score
                playerLoseCount++;
            } else if (playRound(playerSelection, computerSelection).includes('Tie')) {    // if they tie, game doesn't count in the best of 5
                i--;
            }
        }

        // log scores after the rounds
        console.log(`Player: ${playerWinCount}`);
        console.log(`Computer: ${playerLoseCount}`);

        if (playerWinCount > playerLoseCount) {
            console.log('Player Wins!');
        } else if (playerWinCount > playerLoseCount) {
            console.log('Computer Wins!')
        } else {
            console.log('Tie!');
        }
    }

    game();
</script>